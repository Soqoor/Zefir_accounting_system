{% extends 'frontend/base.html' %}

{% load static %}

{% block nav_bar_addition %}
{% if perms.products.add_product %}
<ul class="navbar-nav ml-auto">
    <li class="nav-item">
        <a class="nav-link" id ="link_new_category" data-toggle="modal" data-target="#addCategoryModal" href="#">Новая категория</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id ="link_new_product" data-toggle="modal" data-target="#addProductModal" href="#">Новый товар</a>
    </li>
</ul>
{% endif %}
{% endblock %}


{% block content %}

<div class="container">
    <table class="table table-sm">
        <thead>
          <tr>
            <th scope="col">Категория</th>
            <th scope="col">Название</th>
            <th scope="col">Цена</th>
          </tr>
        </thead>
        <tbody class="table_body">
  
        </tbody>
      </table>
</div>    

<div id="pagination_bar">
    <ul class="pagination justify-content-center">
        <li class="page-item" id="li_prev">
            <a id="btn_prev" class="page-link" href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
        </li>
        <li class="page-item disabled"><a id="pagination_text_field" class="page-link" href="#">1</a></li>
        <li class="page-item" id="li_next">
            <a id="btn_next" class="page-link" href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
    </ul>
</div>

<div class="modal fade" id="addProductModal" tabindex="-1" role="dialog" aria-labelledby="addProductModalTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
	  <div class="modal-content">
		<div class="modal-header">
			<h5 class="modal-title" id="exampleModalLongTitle">Добавить новый товар</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="modal-body">
			<div class="container-fluid">
				<form id="add_product_form">
					<div class="row">
						<div class="col-md-12">
                            <div class="form-group">
                                <label for="exampleFormControlSelect1">Категория</label>
                                <select id='catalog_selector' class="form-control form-control-sm">
                                    <option value="" selected disabled hidden>Выберите категорию</option>
                                    <option id='1'>первый</option>
                                    <option id='2'>второй</option>
                                    <option id='3'>третий</option>
                                </select>
                            </div>
                            <div class="form-group" id="div_product_input">
                                <label for="product">Товар</label>
                                <input type="text" class="form-control form-control-sm" id="name_input" name="product" autocomplete="off"></input>
                            </div>
							<div class="form-group">
								<label for="product">Цена</label>
								<input type="number" id="price_default_input" class="form-control form-control-sm" name="price_default"></input>
							</div>
						</div>
					</div>
				</form>
			</div>
		  </div>
		<div class="modal-footer">
		  <button type="button" id="btn_add_product_error" class="btn btn-danger collapse">На заполнены все поля, или такой товар уже существует</button>
		  <button type="button" id="btn_add_product_cancel" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
		  <button type="button" id="btn_add_product_save" class="btn btn-success">Добавить</button>
		</div>
	  </div>
	</div>
</div>


<div class="modal fade" id="addCategoryModal" tabindex="-1" role="dialog" aria-labelledby="addCategoryModalTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
	  <div class="modal-content">
		<div class="modal-header">
			<h5 class="modal-title" id="exampleModalLongTitle">Добавить новую категорию товаров</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="modal-body">
			<div class="container-fluid">
				<form id="add_category_form">
					<div class="row">
						<div class="col-md-12">
                            <div class="form-group" id="div_product_input">
                                <label for="product">Название категории</label>
                                <input type="text" class="form-control form-control-sm" id="category_input" name="category" autocomplete="off"></input>
                            </div>
						</div>
					</div>
				</form>
			</div>
		  </div>
		<div class="modal-footer">
		  <button type="button" id="btn_add_category_error" class="btn btn-danger collapse">Ошибка, возможно такая категория уже существует</button>
		  <button type="button" id="btn_add_category_cancel" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
		  <button type="button" id="btn_add_category_save" class="btn btn-success">Добавить</button>
		</div>
	  </div>
	</div>
</div>
{% endblock %}

{% block script %}
    <script src="{% static 'frontend/js/products/post_changes.js' %}"></script>
    <script src="{% static 'frontend/js/products/products_get.js' %}"></script>
    <script src="{% static 'frontend/js/products/add_new.js' %}"></script>
{% endblock %}